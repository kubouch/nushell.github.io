(window.webpackJsonp=window.webpackJsonp||[]).push([[503],{1018:function(e,a,t){"use strict";t.r(a);var o=t(35),s=Object(o.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"overlays"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overlays"}},[e._v("#")]),e._v(" Overlays")]),e._v(" "),t("p",[e._v('Overlays act as "layers" of definitions (custom commands, aliases, environment variables) that can be activated and deactivated on demand.\nThey resemble virtual environments found in some languages, such as Python.')]),e._v(" "),t("p",[t("em",[e._v("Note: To understand overlays, make sure to check "),t("RouterLink",{attrs:{to:"/book/modules.html"}},[e._v("Modules")]),e._v(" first as overlays build on top of modules.")],1)]),e._v(" "),t("h2",{attrs:{id:"basics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basics"}},[e._v("#")]),e._v(" Basics")]),e._v(" "),t("p",[e._v("First, Nushell comes with one default overlay called "),t("code",[e._v("zero")]),e._v(".\nYou can inspect which overlays are active with the "),t("RouterLink",{attrs:{to:"/book/commands/overlay_list.html"}},[t("code",[e._v("overlay list")])]),e._v(" command.\nYou should see the default overlay listed there.")],1),e._v(" "),t("p",[e._v("To create a new overlay, you first need a module:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('> module spam {\n    export def foo [] {\n        "foo"\n    }\n\n    export alias bar = "bar"\n\n    export env BAZ {\n        "baz"\n    }\n}\n')])])]),t("p",[e._v("We'll use this module throughout the chapter: Whenever you see "),t("code",[e._v("overlay add spam")]),e._v(", assume "),t("code",[e._v("spam")]),e._v(" is referring to this module.")]),e._v(" "),t("p",[e._v("To create the overlay, call "),t("RouterLink",{attrs:{to:"/book/commands/overlay_add.html"}},[t("code",[e._v("overlay add")])]),e._v(":")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("> overlay add spam\n\n> foo\nfoo\n\n> bar\nbar\n\n> $env.BAZ\nbaz\n\n> overlay list\n───┬──────\n 0 │ zero\n 1 │ spam\n───┴──────\n")])])]),t("p",[e._v("In the following sections, the "),t("code",[e._v(">")]),e._v(" prompt will be preceded by the name of the last active overlay.\n"),t("code",[e._v("(spam)> some-command")]),e._v(" means the "),t("code",[e._v("spam")]),e._v(" overlay is the last active overlay when the command was typed.")]),e._v(" "),t("h2",{attrs:{id:"removing-an-overlay"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removing-an-overlay"}},[e._v("#")]),e._v(" Removing an Overlay")]),e._v(" "),t("p",[e._v("If you don't need the overlay definitions anymore, call "),t("RouterLink",{attrs:{to:"/book/commands/overlay_remove.html"}},[t("code",[e._v("overlay remove")])]),e._v(":")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(spam)> overlay remove spam\n\n(zero)> foo\nError: Can't run executable...\n\n(zero)> overlay list\n───┬──────\n 0 │ zero\n───┴──────\n")])])]),t("p",[e._v("The overlays are also scoped.\nAny added overlays are removed at the end of the scope:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(zero)> do { overlay add spam; foo }\nfoo\n\n(zero)> overlay list\n───┬──────\n 0 │ zero\n───┴──────\n")])])]),t("p",[e._v("Furthermore, "),t("RouterLink",{attrs:{to:"/book/commands/overlay_remove.html"}},[t("code",[e._v("overlay remove")])]),e._v(" without an argument will remove the last active ovelay.")],1),e._v(" "),t("h2",{attrs:{id:"overlays-are-recordable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overlays-are-recordable"}},[e._v("#")]),e._v(" Overlays are Recordable")]),e._v(" "),t("p",[e._v("Any new definition (command, alias, environment variable) is recorded into the last active overlay:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('(zero)> overlay add spam\n\n(spam)> def eggs [] { "eggs" }\n')])])]),t("p",[e._v("Now, the "),t("code",[e._v("eggs")]),e._v(" command belongs to the "),t("code",[e._v("spam")]),e._v(" overlay.\nIf we remove the overlay, we can't call it anymore:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(spam)> overlay remove spam\n\n(zero)> eggs\nError: Can't run executable...\n")])])]),t("p",[e._v("But we can bring it back!")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(zero)> overlay add spam\n\n(spam)> eggs\neggs\n")])])]),t("p",[e._v("Overlays remember what you add to them and store that information even if you remove them.\nThis can let you repeatedly swap between different contexts.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Sometimes, after adding an overlay, you might not want custom definitions to be added into it.\nThe solution can be to create a new empty overlay that would be used just for recording the custom changes:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('(zero)> overlay add spam\n\n(spam)> module scratchpad { }\n\n(spam)> overlay add scratchpad\n\n(scratchpad)> def eggs [] { "eggs" }\n')])])]),t("p",[e._v("The "),t("code",[e._v("eggs")]),e._v(" command is added into "),t("code",[e._v("scratchpad")]),e._v(" while keeping "),t("code",[e._v("spam")]),e._v(" intact.")]),e._v(" "),t("p",[t("em",[e._v("Coming in version 0.64:")]),e._v("\nTo make it less verbose, you can use the "),t("RouterLink",{attrs:{to:"/book/commands/overlay_new.html"}},[t("code",[e._v("overlay new")])]),e._v(" command:")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('(zero)> overlay add spam\n\n(spam)> overlay new scratchpad\n\n(scratchpad)> def eggs [] { "eggs" }\n')])])])]),e._v(" "),t("h2",{attrs:{id:"preserving-definitions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preserving-definitions"}},[e._v("#")]),e._v(" Preserving Definitions")]),e._v(" "),t("p",[e._v("Sometimes, you might want to remove an overlay, but keep all the custom definitions you added without having to redefine them in the next active overlay:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('(zero)> overlay add spam\n\n(spam)> def eggs [] { "eggs" }\n\n(spam)> overlay remove --keep spam\n\n(zero)> eggs\neggs\n')])])]),t("p",[e._v("The "),t("code",[e._v("--keep")]),e._v(" flag does exactly that.")]),e._v(" "),t("h2",{attrs:{id:"ordering-overlays"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ordering-overlays"}},[e._v("#")]),e._v(" Ordering Overlays")]),e._v(" "),t("p",[e._v("The overlays are arranged as a stack.\nIf multiple overlays contain the same definition, say "),t("code",[e._v("foo")]),e._v(", the one from the last active one would take a precedence.\nTo bring some overlay to the top of the stack, you can call "),t("code",[e._v("overlay add")]),e._v(" again:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('(zero)> def foo [] { "foo-in-zero" }\n\n(zero)> overlay add spam\n\n(spam)> foo\nfoo\n\n(spam)> overlay add zero\n\n(zero)> foo\nfoo-in-zero\n\n(zero)> overlay list\n───┬──────\n 0 │ spam\n 1 │ zero\n───┴──────\n')])])]),t("p",[e._v("Now, the "),t("code",[e._v("zero")]),e._v(" overlay takes a precedence.")])])}),[],!1,null,null,null);a.default=s.exports}}]);